# Abelov Hub Records

A comprehensive record management system for tracking product entries, verifications, and distribution with **full CRUD functionality** and a **real-time Convex backend**.

## Key Features

### Authentication & User Management
- **Simple Login/Signup (Local)** for development
- **Protected Routes** in frontend
- **Session Persistence** via `localStorage`
- **Convex Auth** integration

### Hub Record Management
- **Create**: Add new service requests with comprehensive details
- **Read**: View all records on the dashboard or individual details
- **Update**: Edit any existing record
- **Delete**: Remove records from the system
- **Search & Filter**: Find records by customer name, phone, device, ID, or status

### Comprehensive Form
- **Single-Page Form**: All fields visible on one scrollable page (no tabs)
- **8 Sections**:
  1. Shop Information (shop name, technician, date)
  2. Customer Information (name, phone, email, address)
  3. Device Information (model, brand, serial number, OS, accessories)
  4. Problem Description (detailed issue report)
  5. Diagnosis & Repair (diagnosis date, technician, fault, parts, action, status)
  6. Cost Summary (service charge, parts cost, auto-calculated totals and balance)
  7. Repair Timeline (track multiple repair steps with dates and notes)
  8. Customer Confirmation (signature, device collection, technician sign-off)

### Dashboard Features
- **Statistics Cards**: 
  - Total requests count
  - Completed requests
  - Pending requests
  - In-progress requests
  - Total revenue
  - Outstanding balance
- **Record Cards**: Quick overview of each entry with essential info
- **Fast Actions**: Edit, view details, or delete from the dashboard
- **Smart Search**: Real-time search across multiple fields
- **Real-Time Updates**: Data automatically syncs across clients

### Cost Management
- **Auto-Calculation**: Total cost = service charge + parts cost
- **Balance Tracking**: Balance = total cost - deposit paid
- **Payment Status**: Mark payments as completed
- **Financial Overview**: Dashboard shows total revenue and outstanding balance

### Data Persistence & Backend
- **Backend**: Convex (Serverless)
- **Database**: Convex Database
- **Real-time**: Built-in websocket subscriptions
- **Authentication**: Custom auth functions on Convex
- **Type Safety**: End-to-end type safety from database to frontend

## Technology Stack

- **Frontend**: React + TypeScript
- **Styling**: Tailwind CSS + shadcn-ui components
- **Routing**: React Router v6
- **Backend**: Convex
- **Build Tool**: Vite
- **UI Components**: shadcn-ui
- **Icons**: Lucide React
- **State Management**: React Query + Convex Hooks

## Quick Start

### Prerequisites
- Node.js 18+ and npm
- A Convex account (free tier available at https://convex.dev)

### Setup Instructions

1. **Install Dependencies**
   ```bash
   npm install
   ```

2. **Initialize Convex**
   ```bash
   npx convex dev
   ```
   This will:
   - Create a `.env.local` file with your `VITE_CONVEX_URL`
   - Start the Convex development server
   - Generate TypeScript types

3. **Start the Frontend**
   In a new terminal:
   ```bash
   npm run dev
   ```

   Or run both together:
   ```bash
   npm run dev:all
   ```

4. **Open in Browser**
   - Navigate to `http://localhost:5173`

## Project Structure

```
abelov-hub-records/
├── convex/                    # Convex backend
│   ├── schema.ts             # Database schema
│   ├── auth.ts               # Authentication functions
│   ├── hubRecords.ts         # CRUD operations
│   └── tsconfig.json         # TypeScript config
├── src/                      # Frontend
│   ├── pages/                # Login, Dashboard, Form, View, NotFound
│   ├── components/           # UI components
│   ├── lib/
│   │   ├── api.ts            # API client (Convex)
│   │   └── api.rest.ts       # Old REST API (backup)
│   └── ...
├── convex.json              # Convex configuration
└── README.md                # This documentation
```

## Environment Variables

The project uses `.env.local` which is automatically generated by Convex:

```env
VITE_CONVEX_URL=https://your-project.convex.cloud
```

## Migration Notes

This project was migrated from Express + MongoDB to Convex.
- Old backend code is still in `server/` but deprecated.
- Old API client is backed up at `src/lib/api.rest.ts`.

## License

MIT
